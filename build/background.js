!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t,o){const n=o(1),r=":__CHROME_SUFFIX__",{checkIsAtInjectedScript:c,checkIsAtContentScript:i,checkIsAtBackgroundScript:s}=n,{chrome:a}=window,d=c(),u=i();const l={emit(e,...t){let o=e;d&&(o=e+r),console.log("[emitter] emit",o),function(e){if(console.log("[emitter] dispatch",e),d)return console.log("[emitter][injected] dispatch custom event",e.type),void window.dispatchEvent(new CustomEvent("__CHROME_EMITTER_B__",{detail:e}));u&&(console.log("[emitter][content] dispatch custom event",e.type),window.dispatchEvent(new CustomEvent("__CHROME_EMITTER_A__",{detail:e}))),console.log("[emitter] dispatch event",e);const t=(new Date).valueOf();a.storage.local.set({__time__:t,__data__:{value:t,type:e.type,payload:e.payload}})}({type:o,payload:t})},on(e,t){let o=e;d&&(o=e+r,console.log(101,"[emitter][injected] 1. listen event at injected, so sync to content",e,o),l.emit("__CHROME_SYNC_NAME__",o)),_[o]=t}},_={};var p;void 0===window.__CHROME_HAS_LISTEN__&&(p=e=>{const{type:t,payload:o}=e;if(s()&&console.log(e,_,_[t]),u&&"__CHROME_SYNC_NAME__"!==t.replace(r,"")&&t.includes(r)){console.log(115,t,t.replace(r,""));const e=t.replace(r,"");return void l.emit(e)}const n=_[t];void 0!==n&&n(...o)},d?window.addEventListener("__CHROME_EMITTER_A__",(function(e){p(e.detail)})):(u&&window.addEventListener("__CHROME_EMITTER_B__",(function(e){p(e.detail)})),a.storage.onChanged.addListener(e=>{const{__data__:t}=e;if(void 0===t||void 0===t.newValue)return;a.storage.local.remove(["__time__","__data__"]);const o=t.newValue,{type:n,payload:r}=o;p({type:n,payload:r})})),u&&l.on("__CHROME_SYNC_NAME__",e=>{console.log("[emitter][content] 2. receive sync request from injected",e);const t=e.replace(r,"");l.on(t,(...t)=>{l.emit(e,...t)})})),e.exports=l},function(e,t){const o=0,n=1,r=2,c=3;function i(){if(void 0===chrome)return o;if(void 0===chrome.storage)return r;if(void 0===chrome.tabs)return n;const e=chrome.extension.getBackgroundPage();return window===e?c:o}e.exports.checkIsAtContentScript=function(){return i()===n},e.exports.checkIsAtInjectedScript=function(){return i()===r},e.exports.checkIsAtBackgroundScript=function(){return i()===c}},function(e,t){e.exports.getContent=function(e){return`${(new Date).toLocaleTimeString()} - ${e}`},e.exports.loadJs=function(e){return new Promise((t,o)=>{const n=document.createElement("script");n.src=e,document.documentElement.appendChild(n),n.onload=t,n.onerror=o})}},,function(e,t,o){const n=o(0),{getContent:r}=o(2);console.log("here is background"),n.on("popup-to-background",e=>{const t=r(e);console.log("[background] from popup",t)}),n.on("options-to-background",e=>{const t=r(e);console.log("[background] from options",t)}),n.on("content-to-background",e=>{const t=r(e);console.log("[background] from content",t)}),n.on("inserted-to-background",e=>{const t=r(e);console.log("[background] from inserted",t)})}]);