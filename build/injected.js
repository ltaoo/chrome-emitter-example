!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){const o=n(1),r=":__CHROME_SUFFIX__",{checkIsAtInjectedScript:c,checkIsAtContentScript:i,checkIsAtBackgroundScript:d}=o,{chrome:s}=window,a=c(),l=i();const u={emit(e,...t){let n=e;a&&(n=e+r),console.log("[emitter] emit",n),function(e){if(console.log("[emitter] dispatch",e),a)return console.log("[emitter][injected] dispatch custom event",e.type),void window.dispatchEvent(new CustomEvent("__CHROME_EMITTER_B__",{detail:e}));l&&(console.log("[emitter][content] dispatch custom event",e.type),window.dispatchEvent(new CustomEvent("__CHROME_EMITTER_A__",{detail:e}))),console.log("[emitter] dispatch event",e);const t=(new Date).valueOf();s.storage.local.set({__time__:t,__data__:{value:t,type:e.type,payload:e.payload}})}({type:n,payload:t})},on(e,t){let n=e;a&&(n=e+r,console.log(101,"[emitter][injected] 1. listen event at injected, so sync to content",e,n),u.emit("__CHROME_SYNC_NAME__",n)),_[n]=t}},_={};var p;void 0===window.__CHROME_HAS_LISTEN__&&(p=e=>{const{type:t,payload:n}=e;if(d()&&console.log(e,_,_[t]),l&&"__CHROME_SYNC_NAME__"!==t.replace(r,"")&&t.includes(r)){console.log(115,t,t.replace(r,""));const e=t.replace(r,"");return void u.emit(e)}const o=_[t];void 0!==o&&o(...n)},a?window.addEventListener("__CHROME_EMITTER_A__",(function(e){p(e.detail)})):(l&&window.addEventListener("__CHROME_EMITTER_B__",(function(e){p(e.detail)})),s.storage.onChanged.addListener(e=>{const{__data__:t}=e;if(void 0===t||void 0===t.newValue)return;s.storage.local.remove(["__time__","__data__"]);const n=t.newValue,{type:o,payload:r}=n;p({type:o,payload:r})})),l&&u.on("__CHROME_SYNC_NAME__",e=>{console.log("[emitter][content] 2. receive sync request from injected",e);const t=e.replace(r,"");u.on(t,(...t)=>{u.emit(e,...t)})})),e.exports=u},function(e,t){const n=0,o=1,r=2,c=3;function i(){if(void 0===chrome)return n;if(void 0===chrome.storage)return r;if(void 0===chrome.tabs)return o;const e=chrome.extension.getBackgroundPage();return window===e?c:n}e.exports.checkIsAtContentScript=function(){return i()===o},e.exports.checkIsAtInjectedScript=function(){return i()===r},e.exports.checkIsAtBackgroundScript=function(){return i()===c}},function(e,t){e.exports.getContent=function(e){return`${(new Date).toLocaleTimeString()} - ${e}`},e.exports.loadJs=function(e){return new Promise((t,n)=>{const o=document.createElement("script");o.src=e,document.documentElement.appendChild(o),o.onload=t,o.onerror=n})}},,,,,function(e,t,n){const o=n(0),{getContent:r}=n(2);console.log("here is inserted"),o.on("popup-to-inserted",(e,t,n)=>{const o=r(e);console.log("[inserted] from popup",o,t,n)}),document.body.onclick=()=>{o.emit("injected-to-background")}}]);