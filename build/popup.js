!function(e){var t={};function o(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(n,c,function(t){return e[t]}.bind(null,c));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t,o){const n=o(1),c=":__CHROME_SUFFIX__",{checkIsAtInjectedScript:r,checkIsAtContentScript:i,checkIsAtBackgroundScript:s}=n,{chrome:d}=window,p=r(),u=i();const l={emit(e,...t){let o=e;p&&(o=e+c),console.log("[emitter] emit",o),function(e){if(console.log("[emitter] dispatch",e),p)return console.log("[emitter][injected] dispatch custom event",e.type),void window.dispatchEvent(new CustomEvent("__CHROME_EMITTER_B__",{detail:e}));u&&(console.log("[emitter][content] dispatch custom event",e.type),window.dispatchEvent(new CustomEvent("__CHROME_EMITTER_A__",{detail:e}))),console.log("[emitter] dispatch event",e);const t=(new Date).valueOf();d.storage.local.set({__time__:t,__data__:{value:t,type:e.type,payload:e.payload}})}({type:o,payload:t})},on(e,t){let o=e;p&&(o=e+c,console.log(101,"[emitter][injected] 1. listen event at injected, so sync to content",e,o),l.emit("__CHROME_SYNC_NAME__",o)),a[o]=t}},a={};var _;void 0===window.__CHROME_HAS_LISTEN__&&(_=e=>{const{type:t,payload:o}=e;if(s()&&console.log(e,a,a[t]),u&&"__CHROME_SYNC_NAME__"!==t.replace(c,"")&&t.includes(c)){console.log(115,t,t.replace(c,""));const e=t.replace(c,"");return void l.emit(e)}const n=a[t];void 0!==n&&n(...o)},p?window.addEventListener("__CHROME_EMITTER_A__",(function(e){_(e.detail)})):(u&&window.addEventListener("__CHROME_EMITTER_B__",(function(e){_(e.detail)})),d.storage.onChanged.addListener(e=>{const{__data__:t}=e;if(void 0===t||void 0===t.newValue)return;d.storage.local.remove(["__time__","__data__"]);const o=t.newValue,{type:n,payload:c}=o;_({type:n,payload:c})})),u&&l.on("__CHROME_SYNC_NAME__",e=>{console.log("[emitter][content] 2. receive sync request from injected",e);const t=e.replace(c,"");l.on(t,(...t)=>{l.emit(e,...t)})})),e.exports=l},function(e,t){const o=0,n=1,c=2,r=3;function i(){if(void 0===chrome)return o;if(void 0===chrome.storage)return c;if(void 0===chrome.tabs)return n;const e=chrome.extension.getBackgroundPage();return window===e?r:o}e.exports.checkIsAtContentScript=function(){return i()===n},e.exports.checkIsAtInjectedScript=function(){return i()===c},e.exports.checkIsAtBackgroundScript=function(){return i()===r}},function(e,t){e.exports.getContent=function(e){return`${(new Date).toLocaleTimeString()} - ${e}`},e.exports.loadJs=function(e){return new Promise((t,o)=>{const n=document.createElement("script");n.src=e,document.documentElement.appendChild(n),n.onload=t,n.onerror=o})}},function(e,t,o){const n=o(0),{getContent:c}=o(2);console.log("here is popup");const r=document.getElementById("toBackground"),i=document.getElementById("toContent"),s=document.getElementById("toOptions"),d=document.getElementById("toInsertedScript"),p=document.getElementById("fromBackground"),u=document.getElementById("fromContent"),l=document.getElementById("fromOptions"),a=document.getElementById("fromInsertedScript"),_="hello i am popup";r.onclick=()=>{console.log("[popup] send message to background"),n.emit("popup-to-background",_)},i.onclick=()=>{console.log("[popup] send message to content"),n.emit("popup-to-content",_)},s.onclick=()=>{console.log("[popup] send message to options"),n.emit("popup-to-options",_)},d.onclick=()=>{console.log("[popup] send message to inserted"),n.emit("popup-to-inserted",_,"hahaha",1)},n.on("background-to-popup",e=>{const t=c(e);p.innerText=t}),n.on("content-to-popup",e=>{const t=c(e);u.innerText=t}),n.on("options-to-popup",e=>{const t=c(e);l.innerText=t}),n.on("inserted-to-popup",e=>{const t=c(e);a.innerText=t})}]);